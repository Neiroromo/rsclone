# RESTful API commands

Для корректной работы требуется установленный cors (npm i).
Обновление данных можно отслеживать с помощью [MongoDB Compass](http://https://www.mongodb.com/products/compass "MongoDB Compass").
> Для подключения к БД ввести:
mongodb+srv://whattablackhole:9kpBtxwRfLain4LX@cluster.n8ybq.mongodb.net/test

Файлы отвечающие за обработку запросов на сервере лежат в папке "controllers". 


#### обозначения:
- {{URL}} - переменная для адресса сервера,

- (\*) - обязательный

#####1. REGISTRATION

	METHOD : POST
	{{URL}}/api/v1/users/signup - регистрация пользователя с присвоением токена.
######	поля запроса:
	name* - строка,
	email* - строка,
	password* - строка,
	passwordConfirm* - строка
######поля ответа:
	token,
	data: {user}

#####2. LOGIN

	METHOD : POST
	{{URL}}/api/v1/users/login - вход пользователя с присвоением токена.
###### поля запроса:
	email* - строка,
	password* - строка,
###### поля ответа:
	token,
	data: {user}

#####3.CREATE ARTICLE

	METHOD : POST
	{{URL}}/api/v1/articles/
######поля запроса:
	name* - string
	author* - string
	category - string
	article - object(editor.js)
> пример:

    const save = {
          userID: 123,
          title: 'test add article title 5',
          desc: 'test add article description',
        };
        const response = await fetch('http://127.0.0.1:8000/api/v1/articles', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(save),
        });


#####4.GET ALL ARTICLES

	METHOD : GET
	{{URL}}/api/v1/articles/{OPTION}
> пример:

    let url = 'http://localhost:8000/api/v1/articles/';
    let res = await fetch(`${url}`).then((response) => response.json());
    let allArticles = { ...res.data.articles };
    console.log(allArticles);

######OPTIONS:

- {?ИМЯ ПОЛЯ =< значение} - Фильтрация по значению поля
> пример:
{{URL}}/api/v1/articles?author=vasya&views[gt]=100 - выдаст все статьи, где автор вася и количество просмотров больше чем 100

    возможные операции: views=100, views[gt]=100(=), views[gte]=100 (>=), views[lt](<), views[lte](=<)

- {?fields=ИМЯ ПОЛЯ} - Показывает только определенные поля
> пример: 
{{URL}}/api/v1/articles?fields=name - покажет все статьи, однако только их имена.

- {?sort=ИМЯ ПОЛЯ} - сортирует по определенному полю
> пример:
{{URL}}/api/v1/articles?sort=views - сортирует по количеству просмотров

- {?limit=число, ?page=число} - limit - это макс число статей на странице, page - это страница
> пример:
{{URL}}/api/v1/articles?page=1&limit=10 - выведет первую страницу с 10 первыми результатами

#####5. GET ONE ARTICLE
	   METHOD : GET
	   {{URL}}/api/v1/articles/:name/{NAME}
>  пример:
{{URL}}/api/v1/articles/:name/Interstellar Film - получаем одну статью по ее имени	   

#####6. DELETE ONE ARTICLE

	   METHOD : DELETE
	   {{URL}}/api/v1/articles/:name/{NAME}
>    пример:

    let articleTitle = { title: 'test add article title' };
        let response = await fetch('http://127.0.0.1:8000/api/v1/articles/:name/', {
          method: 'DELETE',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(articleTitle),
        });

#####7. UPDATE
	   METHOD : UPDATE
	   {{URL}}/api/v1/articles/:name/{NAME}
>    пример:

    let articleTitle = {
          name: 'test add article title 5', // старое имя статьи
          title: 'updated title',
        };
        let response = await fetch('http://127.0.0.1:8000/api/v1/articles/:name/', {
          method: 'PATCH',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(articleTitle),
        });

